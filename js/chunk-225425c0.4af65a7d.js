(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-225425c0"],{"3ab4":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAkElEQVR4Ae3OgQWAYBiE4QYIEBogNEIIbdE4jdB4jdAA/wB/hwPFJ/B1cccLDp7mJ/O8Dq2oVcDMqKCKDtRrYNDXqOGBEUDtqAaoNgMxovklas3AnKi8QBXUZWAqC1D8sjAR6htMjBqSMTEqBZMA0sQYY4wxxhjDbToYgnQwBOlgCNLBECSD4Rai7k1Ifp53AbHE8jDp7bA+AAAAAElFTkSuQmCC"},bfa4:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"member"},[a("h1",[e._v("會員專區")]),a("div",{staticClass:"member__container"},[a("div",{staticClass:"member__body"},[a("ul",{staticClass:"member__list"},[a("li",{staticClass:"member__item"},[a("div",{staticClass:"mCollapse"},[a("div",{staticClass:"mCollapse__header"},[a("a",{staticClass:"mCollapse__header",class:e.infoCollapse?null:"collapsed",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.infoCollapse=!e.infoCollapse}}},[e._v(" 會員資料 ")])]),a("b-collapse",{model:{value:e.infoCollapse,callback:function(t){e.infoCollapse=t},expression:"infoCollapse"}},[a("div",{staticClass:"mCollapse__body"},[a("editable-text-block",{attrs:{title:"姓名",k:"name",value:e.member.name,type:"text"},on:{emit_newValue:e.change_member_info}}),a("editable-text-block",{attrs:{title:"生日",k:"birthday",value:e.member.birthday,type:"date"},on:{emit_newValue:e.change_member_info}}),a("editable-text-block",{attrs:{title:"電話",k:"tel",value:e.member.tel,type:"text"},on:{emit_newValue:e.change_member_info}}),a("editable-text-block",{attrs:{title:"Email",k:"email",value:e.member.email,type:"email"},on:{emit_newValue:e.change_member_info}}),a("editable-text-block",{attrs:{title:"密碼",k:"password",value:e.member.password,type:"password"},on:{emit_newValue:e.change_member_info}})],1)])],1)]),a("li",{staticClass:"member__item"},[a("div",{staticClass:"mCollapse"},[a("div",{staticClass:"mCollapse__header"},[a("a",{staticClass:"mCollapse__header",class:e.orderCollapse?null:"collapsed",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.orderCollapse=!e.orderCollapse}}},[e._v("訂單查詢")])]),a("b-collapse",{model:{value:e.orderCollapse,callback:function(t){e.orderCollapse=t},expression:"orderCollapse"}},[a("div",{staticClass:"mCollapse__body"},[a("order-collapse",{attrs:{member:e.member,orders:e.orders}})],1)])],1)]),a("li",{staticClass:"member__item"},[a("div",{staticClass:"mCollapse"},[a("div",{staticClass:"mCollapse__header"},[a("a",{staticClass:"mCollapse__header",class:e.favoriteCollapse?null:"collapsed",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.favoriteCollapse=!e.favoriteCollapse}}},[e._v(" 喜好項目 ")])]),a("b-collapse",{model:{value:e.favoriteCollapse,callback:function(t){e.favoriteCollapse=t},expression:"favoriteCollapse"}},[a("div",{staticClass:"mCollapse__body"},[a("div",{staticClass:"mFavorite"},[a("div",{staticClass:"mFavorite__container"},e._l(e.memberFavoriteArr,(function(t,s){return a("div",{key:s,staticClass:"mFavorite__block"},[a("a",{staticClass:"mFavorite__a",attrs:{href:"#"},on:{click:function(a){return e.go_page("/front/onlinestore/all/"+t.id)}}},[a("div",{staticClass:"mFavorite__img"},[a("img",{attrs:{src:t.images.main,alt:""}})]),a("div",{staticClass:"mFavorite__body"},[a("p",{staticClass:"mFavorite__title"},[e._v(e._s(t.title))]),a("p",{staticClass:"mFavorite__id"},[e._v(e._s(t.id))])])])])})),0)])])])],1)]),a("li",{staticClass:"member__item"},[a("div",{staticClass:"mCollapse"},[a("div",{staticClass:"mCollapse__header"},[a("a",{staticClass:"mCollapse__header",class:e.mailCollapse?null:"collapsed",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.mailCollapse=!e.mailCollapse}}},[e._v(" 信件匣 ")])]),a("b-collapse",{model:{value:e.mailCollapse,callback:function(t){e.mailCollapse=t},expression:"mailCollapse"}},[a("div",{staticClass:"mCollapse__body"},e._l(e.memberMails,(function(t,s){return a("div",{key:s,staticClass:"w-100"},[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:t.id,expression:"item.id"}],staticClass:"my-1 w-100 d-flex flex-wrap align-items-center",attrs:{variant:t.read?"success":"secondary"}},[a("span",{staticClass:"col-12 col-md-4 pb-2 pb-md-0"},[e._v(" "+e._s(t.name)+" ")]),a("span",{staticClass:"col-12 col-md-4  pb-2 pb-md-0"},[e._v(" "+e._s(e.convert_time(t.time))+" ")]),a("span",{staticClass:"col-12 col-md-4 "},[e._v(" "+e._s(t.read?"*已讀":"未讀")+" ")])]),a("b-collapse",{attrs:{id:t.id}},[a("b-card",[a("div",{staticClass:"card-body p-0 d-flex flex-column flex-md-row"},[a("h6",{staticClass:"card-title\n                        text-md-right pr-md-3"},[e._v(" 寄件人")]),a("div",{staticClass:"card-text mb-3 mb-md-0"},[e._v(" "+e._s(t.name)+" ")])]),a("div",{staticClass:"card-body p-0 d-flex flex-column flex-md-row"},[a("h6",{staticClass:"card-title\n                        text-md-right pr-md-3"},[e._v(" 寄件日期")]),a("div",{staticClass:"card-text mb-3 mb-md-0"},[e._v(" "+e._s(e.convert_time(t.time))+" ")])]),a("div",{staticClass:"card-body p-0 d-flex flex-column flex-md-row"},[a("h6",{staticClass:"card-title\n                        text-md-right pr-md-3"},[e._v(" 連絡電話")]),a("div",{staticClass:"card-text mb-3 mb-md-0"},[e._v(" "+e._s(t.tel)+" ")])]),a("div",{staticClass:"card-body p-0 d-flex flex-column flex-md-row"},[a("h6",{staticClass:"card-title\n                        text-md-right pr-md-3"},[e._v(" 連絡email")]),a("div",{staticClass:"card-text mb-3 mb-md-0"},[e._v(" "+e._s(t.mail)+" ")])]),a("div",{staticClass:"card-body p-0 d-flex flex-column flex-md-row"},[a("h6",{staticClass:"card-title\n                        text-md-right pr-md-3"},[e._v(" 信件內容")]),a("div",{staticClass:"card-text mb-3 mb-md-0",domProps:{innerHTML:e._s(t.content)}})]),a("hr"),""!==t.reply.id?a("div",{staticClass:"card-body p-0 d-flex flex-column flex-md-row"},[a("h6",{staticClass:"card-title\n                        text-md-right pr-md-3"},[e._v(" 回覆人")]),a("div",{staticClass:"card-text mb-3 mb-md-0"},[e._v(e._s(t.reply.name))])]):e._e(),""!==t.reply.id?a("div",{staticClass:"card-body p-0 d-flex flex-column flex-md-row"},[a("h6",{staticClass:"card-title\n                        text-md-right pr-md-3"},[e._v(" 回覆時間")]),a("div",{staticClass:"card-text mb-3 mb-md-0"},[e._v(" "+e._s(e.convert_time(t.reply.time))+" ")])]):e._e(),""!==t.reply.id?a("div",{staticClass:"card-body p-0 d-flex flex-column flex-md-row"},[a("h6",{staticClass:"card-title\n                        text-md-right pr-md-3"},[e._v(" 回覆內容")]),a("div",{staticClass:"card-text mb-3 mb-md-0",domProps:{innerHTML:e._s(t.reply.content)}})]):e._e(),""===t.reply.id?a("div",{staticClass:"card-body p-0 d-flex flex-column flex-md-row"},[a("h6",{staticClass:"card-title\n                        text-md-right pr-md-3"},[e._v(" 尚未回覆")])]):e._e()])],1)],1)})),0)])],1)])])])])])},l=[],i=(a("99af"),a("4de4"),a("7db0"),a("4160"),a("caad"),a("2532"),a("159b"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"etb"},[s("div",{staticClass:"etb__key"},[s("p",{staticClass:"etb__key__p"},[e._v(e._s(this.title))])]),s("div",{staticClass:"etb__value"},[e.editing?e._e():s("div",{staticClass:"etb__value--display"},[s("p",{staticClass:"etb__value__p"},[e._v(e._s(this.convertedValue))]),s("div",{staticClass:"etb__value__edit"},[s("a",{attrs:{href:"#",title:"修改"},on:{click:function(t){return t.preventDefault(),e.start_editing(t)}}},[s("img",{attrs:{src:a("3ab4"),alt:""}})])])]),e.editing?s("div",{staticClass:"etb__value--editing"},["checkbox"===this.type?s("input",{directives:[{name:"model",rawName:"v-model",value:e.newValue,expression:"newValue"}],staticClass:"etb__value__input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.newValue)?e._i(e.newValue,null)>-1:e.newValue},on:{change:function(t){var a=e.newValue,s=t.target,l=!!s.checked;if(Array.isArray(a)){var i=null,n=e._i(a,i);s.checked?n<0&&(e.newValue=a.concat([i])):n>-1&&(e.newValue=a.slice(0,n).concat(a.slice(n+1)))}else e.newValue=l}}}):"radio"===this.type?s("input",{directives:[{name:"model",rawName:"v-model",value:e.newValue,expression:"newValue"}],staticClass:"etb__value__input",attrs:{type:"radio"},domProps:{checked:e._q(e.newValue,null)},on:{change:function(t){e.newValue=null}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:e.newValue,expression:"newValue"}],staticClass:"etb__value__input",attrs:{type:this.type},domProps:{value:e.newValue},on:{input:function(t){t.target.composing||(e.newValue=t.target.value)}}}),s("div",{staticClass:"etb__value__done"},["password"!==e.type?s("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.complete_editing(t)}}},[e._v(" 儲存 ")]):e._e(),s("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.giveup_editing(t)}}},[e._v(" 放棄 ")])])]):e._e(),e.editing&&"password"===e.type?s("div",{staticClass:"etb__value--editing"},["checkbox"===this.type?s("input",{directives:[{name:"model",rawName:"v-model",value:e.newValue,expression:"newValue"}],staticClass:"etb__value__input",attrs:{placeholder:"請再次輸入",type:"checkbox"},domProps:{checked:Array.isArray(e.newValue)?e._i(e.newValue,null)>-1:e.newValue},on:{change:function(t){var a=e.newValue,s=t.target,l=!!s.checked;if(Array.isArray(a)){var i=null,n=e._i(a,i);s.checked?n<0&&(e.newValue=a.concat([i])):n>-1&&(e.newValue=a.slice(0,n).concat(a.slice(n+1)))}else e.newValue=l}}}):"radio"===this.type?s("input",{directives:[{name:"model",rawName:"v-model",value:e.newValue,expression:"newValue"}],staticClass:"etb__value__input",attrs:{placeholder:"請再次輸入",type:"radio"},domProps:{checked:e._q(e.newValue,null)},on:{change:function(t){e.newValue=null}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:e.newValue,expression:"newValue"}],staticClass:"etb__value__input",attrs:{placeholder:"請再次輸入",type:this.type},domProps:{value:e.newValue},on:{input:function(t){t.target.composing||(e.newValue=t.target.value)}}}),s("div",{staticClass:"etb__value__done"},[s("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.complete_editing_password(t)}}},[e._v(" 儲存 ")])])]):e._e()])])}),n=[],r={props:["title","k","value","type"],computed:{members:function(){var e;return this.$bus.$on("son_get_data",(function(t){e=t.members})),this.$bus.$emit("son_call_data"),e},convertedValue:function(){var e="password"===this.type?"XXX密碼XXX":this.value;return e}},data:function(){return{editing:!1,newValue:"",confirmPassword:""}},methods:{start_editing:function(){"password"===this.type?this.newValue="":this.newValue=this.value,this.editing=!0},complete_editing:function(){var e=this.confirm_email_repeated();e?(alert("電子信箱重複，請使用另一個電子信箱"),this.newValue=""):(this.$emit("emit_newValue",this.k,this.newValue),this.editing=!1)},complete_editing_password:function(){this.newValue===this.confirmPassword?this.complete_editing():(alert("再次輸入密碼不一致"),this.newValue="",this.confirmPassword="")},giveup_editing:function(){this.editing=!1,this.newValue="",this.confirmPassword=""},confirm_email_repeated:function(){var e=this,t=this.members.find((function(t){return t.email===e.newValue}));return t}}},o=r,c=a("2877"),d=Object(c["a"])(o,i,n,!1,null,null,null),m=d.exports,u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"oc"},[a("table",{staticClass:"table oc__table"},[e._m(0),a("tbody",e._l(e.memberOrders,(function(t,s){return a("tr",{key:s},[a("td",[e._v(e._s(t.id))]),a("td",[e._v(e._s(e.convert_time(t.createTime)))]),a("td",[e._v(e._s(t.sum))]),a("td",[t.payment.ifPaid?e._e():a("span",[e._v(" 未結帳 ")]),t.payment.ifPaid?a("span",{staticClass:"d-flex flex-column"},[a("span",[e._v(" 結帳時間: ")]),a("span",[e._v(" "+e._s(t.payment.info.time)+" ")])]):e._e()]),a("td",[t.sending.ifSent?e._e():a("span",[e._v(" 未出貨 ")]),t.sending.ifSent?a("span",[a("span",[e._v(" "+e._s(e.convert_time(t.sending.info.sentTime))+" ")]),a("span",[e._v(" 已出貨 ")])]):e._e()]),a("td",[a("a",{staticClass:"myBtn myBtn--primary",attrs:{href:"#"},on:{click:function(a){return e.go_page("/front/checkout_payment/"+t.id)}}},[e._v(" 查看詳細資料 / 結帳 ")])])])})),0)])])},_=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",[e._v("訂單編號")]),a("th",[e._v("訂單建立日期")]),a("th",[e._v("總金額")]),a("th",[e._v("結帳時間")]),a("th",[e._v("出貨狀態")]),a("th")])])}],p={props:["member","orders"],computed:{memberOrders:function(){var e=[],t=this.member.id,a=this.orders.filter((function(e){return e.memberId===t}));return e=JSON.parse(JSON.stringify(a)),e}},data:function(){return{collapse:!0}},methods:{go_page:function(e){this.$router.push(e)},convert_time:function(e){var t=new Date(e),a=t.getFullYear(),s=t.getMonth()+1,l=t.getDate(),i=function(e){return(e>9?"":"0")+e},n="".concat(a,"-").concat(i(s),"-").concat(i(l));return n}}},v=p,f=Object(c["a"])(v,u,_,!1,null,null,null),b=f.exports,h={components:{EditableTextBlock:m,OrderCollapse:b},computed:{member:function(){var e;return this.$bus.$on("son_get_data",(function(t){e=t.member})),this.$bus.$emit("son_call_data"),e},products:function(){var e=[];return this.$bus.$on("son_get_data",(function(t){e=t.products})),this.$bus.$emit("son_call_data"),e},memberFavoriteArr:function(){var e=this,t=[];return this.member.favorites.forEach((function(a){var s=e.products.find((function(e){return e.id===a}));t.push(s)})),t},orders:function(){var e=[];return this.$bus.$on("son_get_data",(function(t){e=t.orders})),this.$bus.$emit("son_call_data"),e},memberMails:function(){var e=this,t=[],a=[];return this.$bus.$on("son_get_data",(function(e){a=e.mails})),this.$bus.$emit("son_call_data"),t=a.filter((function(t){return t.id.includes(e.member.id)})),t}},data:function(){return{infoCollapse:!0,orderCollapse:!0,favoriteCollapse:!0,mailCollapse:!0}},methods:{go_page:function(e){this.$router.push(e)},change_member_info:function(e,t){this.member[e]=t},convert_time:function(e){var t=new Date(JSON.parse(e)),a=function(e){var t=e.getFullYear(),a=e.getMonth()+1,s=e.getDate();return"".concat(t," 年 ").concat(a," 月 ").concat(s," 日")};return a(t)}},created:function(){this.$bus.$emit("toggleCart",!1)}},C=h,w=Object(c["a"])(C,s,l,!1,null,null,null);t["default"]=w.exports}}]);
//# sourceMappingURL=chunk-225425c0.4af65a7d.js.map