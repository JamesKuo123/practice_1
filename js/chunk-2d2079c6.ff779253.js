(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2079c6"],{a0ef:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bMails"},[a("div",{staticClass:"bMails__container container pt-4"},[t._m(0),a("div",{staticClass:"bMails__body d-flex flex-column align-items-center"},t._l(t.mails,(function(e,s){return a("form",{key:s,staticClass:"bMails__form w-100 pb-3 position-relative",on:{submit:function(e){return e.preventDefault(),t.submit_reply(s)}}},[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:e.id,expression:"item.id"}],staticClass:"my-1 w-100 d-flex flex-wrap align-items-center"},[a("span",{staticClass:"col-12 col-md-4 pb-2 pb-md-0"},[t._v(" "+t._s(e.name)+" ")]),a("span",{staticClass:"col-12 col-md-4  pb-2 pb-md-0"},[t._v(" "+t._s(t.convert_time(e.time))+" ")]),a("span",{staticClass:"col-12 col-md-4 "},[e.read?t._e():a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(a){return t.toggle_read(e.id,!0)}}},[t._v(" 標為已讀 ")]),e.read?a("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(a){return t.toggle_read(e.id,!1)}}},[t._v(" 標為未讀 ")]):t._e()])]),a("b-collapse",{attrs:{id:e.id}},[a("b-card",[a("div",{staticClass:"card-body p-0 d-flex flex-column flex-md-row"},[a("h6",{staticClass:"card-title\n              text-md-right pr-md-3"},[t._v(" 寄件人")]),a("div",{staticClass:"card-text mb-3 mb-md-0"},[t._v(" "+t._s(e.name)+" ")])]),a("div",{staticClass:"card-body p-0 d-flex flex-column flex-md-row"},[a("h6",{staticClass:"card-title\n              text-md-right pr-md-3"},[t._v(" 寄件日期")]),a("div",{staticClass:"card-text mb-3 mb-md-0"},[t._v(" "+t._s(t.convert_time(e.time))+" ")])]),a("div",{staticClass:"card-body p-0 d-flex flex-column flex-md-row"},[a("h6",{staticClass:"card-title\n              text-md-right pr-md-3"},[t._v(" 連絡電話")]),a("div",{staticClass:"card-text mb-3 mb-md-0"},[a("a",{staticClass:"text-primary",attrs:{href:"tel: "+e.tel}},[t._v(t._s(e.tel))])])]),a("div",{staticClass:"card-body p-0 d-flex flex-column flex-md-row"},[a("h6",{staticClass:"card-title\n              text-md-right pr-md-3"},[t._v(" 連絡email")]),a("div",{staticClass:"card-text mb-3 mb-md-0"},[a("a",{staticClass:"text-primary",attrs:{href:"mailto: "+e.mail}},[t._v(t._s(e.mail))])])]),a("div",{staticClass:"card-body p-0 d-flex flex-column flex-md-row"},[a("h6",{staticClass:"card-title\n              text-md-right pr-md-3"},[t._v(" 信件內容")]),a("div",{staticClass:"card-text mb-3 mb-md-0",domProps:{innerHTML:t._s(e.content)}})]),a("hr"),""!==e.reply.id?a("div",{staticClass:"card-body p-0 d-flex flex-column flex-md-row"},[a("h6",{staticClass:"card-title\n              text-md-right pr-md-3"},[t._v(" 回覆人")]),a("div",{staticClass:"card-text mb-3 mb-md-0"},[t._v(t._s(e.reply.name))])]):t._e(),""!==e.reply.id?a("div",{staticClass:"card-body p-0 d-flex flex-column flex-md-row"},[a("h6",{staticClass:"card-title\n              text-md-right pr-md-3"},[t._v(" 回覆時間")]),a("div",{staticClass:"card-text mb-3 mb-md-0"},[t._v(t._s(t.convert_time(e.reply.time)))])]):t._e(),""!==e.reply.id?a("div",{staticClass:"card-body p-0 d-flex flex-column flex-md-row"},[a("h6",{staticClass:"card-title\n              text-md-right pr-md-3"},[t._v(" 回覆內容")]),a("div",{staticClass:"card-text mb-3 mb-md-0",domProps:{innerHTML:t._s(e.reply.content)}})]):t._e(),""===e.reply.id?a("div",{staticClass:"form-group"},[a("label",[t._v("回覆內容")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.reply.content,expression:"item.reply.content"}],staticClass:"form-control",attrs:{rows:"5",placeholder:"回覆內容",required:""},domProps:{value:e.reply.content},on:{input:function(a){a.target.composing||t.$set(e.reply,"content",a.target.value)}}})]):t._e(),""===e.reply.id?a("div",{staticClass:"d-flex justify-content-end"},[a("button",{staticClass:"btn btn-info mr-3",attrs:{type:"submit"}},[t._v(" 送出回覆 ")])]):t._e()])],1)],1)})),0)])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bMails__header row"},[a("div",{staticClass:"bMails__header__h2 h2 col"},[t._v("信件匣")])])}],l=(a("99af"),a("b0c0"),{props:["admin"],data:function(){return{mails:[]}},methods:{initialize_mails:function(){var t;this.$bus.$on("son_get_data",(function(e){t=e.mails})),this.$bus.$emit("son_call_data");var e=function(t){t.sort((function(t,e){var a=JSON.parse(t.time),s=JSON.parse(e.time);return s-a}))};e(t),this.mails=t},convert_time:function(t){var e=new Date(JSON.parse(t)),a=function(t){var e=t.getFullYear(),a=t.getMonth()+1,s=t.getDate();return"".concat(e," 年 ").concat(a," 月 ").concat(s," 日")};return a(e)},toggle_read:function(t,e){this.$bus.$emit("toggle_mail_read",t,e),this.initialize_mails()},submit_reply:function(t){var e=this.mails[t],a=(new Date).getTime(),s=JSON.stringify(a),i="mailReply".concat(s),l=this.admin.name;e.reply.id=i,e.reply.time=s,e.reply.name=l,this.$bus.$emit("submit_mailReply",e.id,e.reply),this.initialize_mails()}},created:function(){this.initialize_mails()}}),r=l,n=a("2877"),c=Object(n["a"])(r,s,i,!1,null,null,null);e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d2079c6.ff779253.js.map