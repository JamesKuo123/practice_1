(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21aada"],{bd13:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"loginPage"},[r("h1",[t._v("登入")]),r("div",{staticClass:"container"},[r("div",{staticClass:"row justify-content-center"},[r("div",{staticClass:"col-10 col-md-5 d-flex flex-column"},[""===t.user.id?r("div",{staticClass:"card mb-3"},[r("div",{staticClass:"card-header"},[t._v(" 登入 ")]),r("div",{staticClass:"card-body"},[r("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(e){var a=e.handleSubmit;return[r("form",{on:{submit:function(e){return e.preventDefault(),a(t.login)}}},[r("ValidationProvider",{attrs:{name:"Email",rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[r("div",{staticClass:"form-group"},[r("label",[t._v("Email")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.loginForm.email,expression:"loginForm.email"}],staticClass:"form-control",attrs:{type:"email"},domProps:{value:t.loginForm.email},on:{input:function(e){e.target.composing||t.$set(t.loginForm,"email",e.target.value)}}}),r("span",{staticClass:"text-danger"},[t._v(t._s(a[0]))])])]}}],null,!0)}),r("ValidationProvider",{attrs:{name:"Password",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[r("div",{staticClass:"form-group"},[r("label",[t._v("密碼")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.loginForm.password,expression:"loginForm.password"}],staticClass:"form-control",attrs:{type:"password"},domProps:{value:t.loginForm.password},on:{input:function(e){e.target.composing||t.$set(t.loginForm,"password",e.target.value)}}}),r("span",{staticClass:"text-danger"},[t._v(t._s(a[0]))])])]}}],null,!0)}),r("div",{staticClass:"d-flex justify-content-end"},[r("input",{staticClass:"btn btn-primary",attrs:{type:"submit",value:"登入"}})])],1)]}}],null,!1,888509694)})],1)]):t._e(),""===t.user.id?r("div",{staticClass:"card mb-3"},[r("div",{staticClass:"card-header"},[t._v(" 使用 FB 登入 ")]),r("div",{staticClass:"card-body d-flex justify-content-center align-items-center"},[r("button",{staticClass:"btn btn-primary",on:{click:function(e){return e.preventDefault(),t.fbLogin(e)}}},[t._v("FB 登入")])])]):t._e()]),r("div",{staticClass:"col-10 col-md-5"},[""===t.user.id?r("div",{staticClass:"card mb-3"},[r("div",{staticClass:"card-header"},[t._v(" 快速註冊會員 ")]),r("div",{staticClass:"card-body"},[r("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(e){var a=e.handleSubmit;return[r("form",{on:{submit:function(e){return e.preventDefault(),a(t.register)}}},[r("ValidationProvider",{attrs:{name:"Name",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[r("div",{staticClass:"form-group"},[r("label",[t._v("姓名")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.registerForm.name,expression:"registerForm.name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.registerForm.name},on:{input:function(e){e.target.composing||t.$set(t.registerForm,"name",e.target.value)}}}),r("span",{staticClass:"text-danger"},[t._v(t._s(a[0]))])])]}}],null,!0)}),r("ValidationProvider",{attrs:{name:"Gender",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[r("div",{staticClass:"form-group"},[r("label",[t._v("性別")]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.registerForm.gender,expression:"registerForm.gender"}],staticClass:"form-control",on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.registerForm,"gender",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"male"}},[t._v("男")]),r("option",{attrs:{value:"female"}},[t._v("女")])]),r("span",{staticClass:"text-danger"},[t._v(t._s(a[0]))])])]}}],null,!0)}),r("ValidationProvider",{attrs:{name:"Birthday",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[r("div",{staticClass:"form-group"},[r("label",[t._v("生日")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.registerForm.birthday,expression:"registerForm.birthday"}],staticClass:"form-control",attrs:{type:"date"},domProps:{value:t.registerForm.birthday},on:{input:function(e){e.target.composing||t.$set(t.registerForm,"birthday",e.target.value)}}}),r("span",{staticClass:"text-danger"},[t._v(t._s(a[0]))])])]}}],null,!0)}),r("ValidationProvider",{attrs:{name:"Telephone",rules:"required|numeric"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[r("div",{staticClass:"form-group"},[r("label",[t._v("電話")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.registerForm.tel,expression:"registerForm.tel"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.registerForm.tel},on:{input:function(e){e.target.composing||t.$set(t.registerForm,"tel",e.target.value)}}}),r("span",{staticClass:"text-danger"},[t._v(t._s(a[0]))])])]}}],null,!0)}),r("ValidationProvider",{attrs:{name:"Email",rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[r("div",{staticClass:"form-group"},[r("label",[t._v("Email")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.registerForm.email,expression:"registerForm.email"}],staticClass:"form-control",attrs:{type:"email"},domProps:{value:t.registerForm.email},on:{input:function(e){e.target.composing||t.$set(t.registerForm,"email",e.target.value)}}}),r("span",{staticClass:"text-danger"},[t._v(t._s(a[0]))])])]}}],null,!0)}),r("ValidationProvider",{attrs:{name:"Password",rules:"required|min:8"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[r("div",{staticClass:"form-group"},[r("label",[t._v("密碼")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.registerForm.password,expression:"registerForm.password"}],staticClass:"form-control",attrs:{type:"password"},domProps:{value:t.registerForm.password},on:{input:function(e){e.target.composing||t.$set(t.registerForm,"password",e.target.value)}}}),r("span",{staticClass:"text-danger"},[t._v(t._s(a[0]))])])]}}],null,!0)}),r("ValidationProvider",{attrs:{name:"Confirm Password",rules:"required|confirmed:Password"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[r("div",{staticClass:"form-group"},[r("label",[t._v("確認密碼")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.registerForm.confirm,expression:"registerForm.confirm"}],staticClass:"form-control",attrs:{type:"password"},domProps:{value:t.registerForm.confirm},on:{input:function(e){e.target.composing||t.$set(t.registerForm,"confirm",e.target.value)}}}),r("span",{staticClass:"text-danger"},[t._v(t._s(a[0]))])])]}}],null,!0)}),r("ValidationProvider",{attrs:{name:"Register Captcha",rules:"required|is:"+t.registerForm.captchaCode},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[r("div",{staticClass:"form-group"},[r("label",[t._v("驗證碼")]),r("br"),r("canvas",{staticClass:"canvas",attrs:{height:"40",width:"75",id:"registerCaptcha"}}),r("div",{staticClass:"d-flex align-items-center"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.registerForm.captchaInput,expression:"registerForm.captchaInput"}],staticClass:"form-control flex-shrink-1",attrs:{type:"text"},domProps:{value:t.registerForm.captchaInput},on:{input:function(e){e.target.composing||t.$set(t.registerForm,"captchaInput",e.target.value)}}}),r("button",{staticClass:"flex-shrink-0 ml-2 btn btn-secondary",on:{click:function(e){e.preventDefault(),t.registerForm.captchaCode=t.createCaptcha("registerCaptcha")}}},[t._v(" 換一個")])]),r("span",{staticClass:"text-danger"},[t._v(t._s(a[0]))])])]}}],null,!0)}),r("hr"),r("div",{staticClass:"d-flex justify-content-end"},[r("input",{staticClass:"btn btn-primary",attrs:{type:"submit",value:"註冊會員"}})])],1)]}}],null,!1,657371768)})],1)]):t._e()])])])])},s=[],o=(r("c740"),r("b680"),r("fb3d")),i=r.n(o),n={computed:{user:function(){var t={};return this.$bus.$on("son_get_data",(function(e){t=e.member})),this.$bus.$emit("son_call_data"),t},members:function(){var t=[];return this.$bus.$on("son_get_data",(function(e){t=e.members})),this.$bus.$emit("son_call_data"),t}},watch:{"user.id":function(){""!==this.user.id&&this.go_page("/front/onlinestore/all"),this.createRegisterForm()}},data:function(){return{ckEditorType:i.a,loginForm:{email:"",password:""},registerForm:{}}},methods:{go_page:function(t){this.$router.push(t)},login:function(){var t=this,e=this.members.findIndex((function(e){return e.email===t.loginForm.email}));if(e<0)this.$bus.$emit("show_toast","warning","無此用戶");else{var r=this.members[e];r.password!==this.loginForm.password?(this.loginForm.password="",this.$bus.$emit("show_toast","warning","密碼錯誤")):this.$bus.$emit("log_in",r)}},fbLogin:function(){this.$bus.$emit("fb_login",!0)},createRegisterForm:function(){var t=this.createCaptcha("registerCaptcha");this.registerForm={id:"member__".concat(Date.parse(new Date)),name:"",gender:"",birthday:"",tel:"",email:"",password:"",confirm:"",favorites:[],captchaCode:t,captchaInput:""}},register:function(){var t=JSON.parse(JSON.stringify(this.registerForm));delete t.confirm,delete t.captchaCode,delete t.captchaInput,this.$bus.$emit("add_new_member",t),this.createRegisterForm()},createCaptcha:function(t){var e=this,r="",a=function(){e.input_code="";for(var a=4,s="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",o=0;o<a;o+=1){var i=parseInt(Math.floor(Math.random()*s.length),10),n=s[i];r+=n}e.registerForm.captchaCode=r;var l=document.getElementById(t),d=l.getContext("2d");d.fillStyle="white",d.fillRect(0,0,100,100),d.font="bolder 25px Roboto",d.fillStyle="black",d.fillText(r,5,30),d.strokeStyle="black",d.beginPath(),d.lineWidth="1",d.moveTo(Math.floor(70*Math.random())+5,0),d.lineTo(Math.floor(60*Math.random())+5,25),d.moveTo(Math.floor(70*Math.random())+5,10),d.lineTo(Math.floor(70*Math.random())+5,28),d.stroke(),d.strokeStyle="black",d.beginPath(),d.lineWidth="1";for(var u=0;u<100;u+=1){var m=Math.floor(78*Math.random()),c=Math.floor(28*Math.random()),p=parseFloat((2*Math.random()).toFixed(2)),v=parseFloat((2*Math.random()).toFixed(2)),f=m+p,g=c+v;d.moveTo(m,c),d.lineTo(f,g)}d.stroke()};return a(),r}},mounted:function(){this.$bus.$emit("toggleCart",!1),this.createRegisterForm()}},l=n,d=r("2877"),u=Object(d["a"])(l,a,s,!1,null,null,null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d21aada.e80f8cee.js.map