(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d226782"],{e991:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bCoupons"},[n("div",{staticClass:"bCoupons__container container pt-4"},[t._m(0),n("div",{staticClass:"bCoupons__body row"},[t._l(t.coupons,(function(e,i){return n("div",{key:i,staticClass:"col-6 mb-2"},[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:e.id,expression:"item.id"}],staticClass:"my-1 w-100 d-flex flex-wrap align-items-center"},[n("span",{staticClass:"col"},[t._v(" "+t._s(e.description)+" ")])]),n("b-collapse",{attrs:{id:e.id}},[n("b-card",[n("form",{on:{submit:function(e){return e.preventDefault(),t.complete_editing(i)}}},[n("div",{staticClass:"card-body p-0 mb-md-3\n              d-flex flex-column flex-md-row align-items-md-center"},[n("h6",{staticClass:"card-title\n                text-md-right pr-md-3 mb-md-0"},[t._v(" 優惠券id")]),e.editing?t._e():n("div",{staticClass:"card-text mb-3 mb-md-0"},[t._v(" "+t._s(e.id)+" ")]),e.editing?n("div",{staticClass:"card-text mb-3 mb-md-0"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.id,expression:"item.id"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:e.id},on:{input:function(n){n.target.composing||t.$set(e,"id",n.target.value)}}})]):t._e()]),n("div",{staticClass:"card-body p-0 mb-md-3\n              d-flex flex-column flex-md-row align-items-md-center"},[n("h6",{staticClass:"card-title\n                text-md-right pr-md-3 mb-md-0"},[t._v(" 優惠券描述")]),e.editing?t._e():n("div",{staticClass:"card-text mb-3 mb-md-0"},[t._v(" "+t._s(e.description)+" ")]),e.editing?n("div",{staticClass:"card-text mb-3 mb-md-0"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"item.description"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:e.description},on:{input:function(n){n.target.composing||t.$set(e,"description",n.target.value)}}})]):t._e()]),n("div",{staticClass:"card-body p-0 mb-md-3\n              d-flex flex-column flex-md-row align-items-md-center"},[n("h6",{staticClass:"card-title\n                text-md-right pr-md-3 mb-md-0"},[t._v(" 折扣方式")]),e.editing?t._e():n("div",{staticClass:"card-text mb-3 mb-md-0"},[t._v(" "+t._s(t.convert_discount_method(e.discount_method))+" ")]),e.editing?n("div",{staticClass:"card-text mb-3 mb-md-0"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.method,expression:"item.method"}],staticClass:"form-control",attrs:{required:""},on:{change:function(n){var i=Array.prototype.filter.call(n.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"method",n.target.multiple?i:i[0])}}},[n("option",{attrs:{value:"",disabled:""}},[t._v("折扣方式")]),n("option",{attrs:{value:"minus"}},[t._v("原價減去")]),n("option",{attrs:{value:"times"}},[t._v("原價打折")])])]):t._e()]),n("div",{staticClass:"card-body p-0 mb-md-3\n              d-flex flex-column flex-md-row align-items-md-center"},[n("h6",{staticClass:"card-title\n                text-md-right pr-md-3 mb-md-0"},[t._v(" 折扣基數")]),e.editing?t._e():n("div",{staticClass:"card-text mb-3 mb-md-0"},[t._v(" "+t._s(e.discount_index)+" ")]),e.editing?n("div",{staticClass:"card-text mb-3 mb-md-0"},["minus"===e.discount_method?n("input",{directives:[{name:"model",rawName:"v-model",value:e.discount_index,expression:"item.discount_index"}],staticClass:"form-control",attrs:{type:"number",min:"1",step:"1",required:""},domProps:{value:e.discount_index},on:{input:function(n){n.target.composing||t.$set(e,"discount_index",n.target.value)}}}):t._e(),"times"===e.discount_method?n("input",{directives:[{name:"model",rawName:"v-model",value:e.discount_index,expression:"item.discount_index"}],staticClass:"form-control",attrs:{type:"number",min:"0",max:"1",step:"0.1",required:""},domProps:{value:e.discount_index},on:{input:function(n){n.target.composing||t.$set(e,"discount_index",n.target.value)}}}):t._e()]):t._e()]),n("hr"),n("div",{staticClass:"card-body p-0 d-flex justify-content-end"},[e.editing?t._e():n("button",{staticClass:"btn btn-info mr-3",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.start_editing(i)}}},[t._v(" 編輯優惠券 ")]),e.editing?n("button",{staticClass:"btn btn-success mr-3",attrs:{type:"submit"}},[t._v(" 儲存變更 ")]):t._e(),e.editing?n("button",{staticClass:"btn btn-warning mr-3",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.initialize_coupons(e)}}},[t._v(" 放棄變更 ")]):t._e(),n("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.delete_coupon(i)}}},[t._v(" 刪除優惠券 ")])])])])],1)],1)})),n("div",{staticClass:"col-6 mb-2"},[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"newCoupon",expression:"'newCoupon'"}],staticClass:"my-1 w-100 d-flex flex-wrap align-items-center",attrs:{variant:"primary"}},[n("span",{staticClass:"col"},[t._v(" 新增優惠券 ")])]),n("b-collapse",{attrs:{id:"newCoupon"}},[n("b-card",[n("form",{on:{submit:function(e){return e.preventDefault(),t.submit_new_coupon(e)}}},[n("div",{staticClass:"card-body p-0 mb-md-3\n              d-flex flex-column flex-md-row align-items-md-center"},[n("h6",{staticClass:"card-title\n                text-md-right pr-md-3 mb-md-0"},[t._v(" 優惠券id")]),n("div",{staticClass:"card-text mb-3 mb-md-0"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newCoupon.id,expression:"newCoupon.id"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.newCoupon.id},on:{input:function(e){e.target.composing||t.$set(t.newCoupon,"id",e.target.value)}}})])]),n("div",{staticClass:"card-body p-0 mb-md-3\n              d-flex flex-column flex-md-row align-items-md-center"},[n("h6",{staticClass:"card-title\n                text-md-right pr-md-3 mb-md-0"},[t._v(" 優惠券描述")]),n("div",{staticClass:"card-text mb-3 mb-md-0"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newCoupon.description,expression:"newCoupon.description"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.newCoupon.description},on:{input:function(e){e.target.composing||t.$set(t.newCoupon,"description",e.target.value)}}})])]),n("div",{staticClass:"card-body p-0 mb-md-3\n              d-flex flex-column flex-md-row align-items-md-center"},[n("h6",{staticClass:"card-title\n                text-md-right pr-md-3 mb-md-0"},[t._v(" 折扣方式")]),n("div",{staticClass:"card-text mb-3 mb-md-0"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.newCoupon.discount_method,expression:"newCoupon.discount_method"}],staticClass:"form-control",attrs:{required:""},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.newCoupon,"discount_method",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"",disabled:""}},[t._v("折扣方式")]),n("option",{attrs:{value:"minus"}},[t._v("原價減去")]),n("option",{attrs:{value:"times"}},[t._v("原價打折")])])])]),n("div",{staticClass:"card-body p-0 mb-md-3\n              d-flex flex-column flex-md-row align-items-md-center"},[n("h6",{staticClass:"card-title\n                text-md-right pr-md-3 mb-md-0"},[t._v(" 折扣基數")]),n("div",{staticClass:"card-text mb-3 mb-md-0"},["minus"===t.newCoupon.discount_method?n("input",{directives:[{name:"model",rawName:"v-model",value:t.newCoupon.discount_index,expression:"newCoupon.discount_index"}],staticClass:"form-control",attrs:{type:"number",min:"1",step:"1",required:""},domProps:{value:t.newCoupon.discount_index},on:{input:function(e){e.target.composing||t.$set(t.newCoupon,"discount_index",e.target.value)}}}):t._e(),"times"===t.newCoupon.discount_method?n("input",{directives:[{name:"model",rawName:"v-model",value:t.newCoupon.discount_index,expression:"newCoupon.discount_index"}],staticClass:"form-control",attrs:{type:"number",min:"0",max:"1",step:"0.1",required:""},domProps:{value:t.newCoupon.discount_index},on:{input:function(e){e.target.composing||t.$set(t.newCoupon,"discount_index",e.target.value)}}}):t._e()])]),n("hr"),n("div",{staticClass:"card-body p-0 d-flex justify-content-end"},[n("button",{staticClass:"btn btn-success mr-3",attrs:{type:"submit"}},[t._v(" 新增優惠券 ")]),n("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.create_new_coupon(e)}}},[t._v(" 清除重填 ")])])])])],1)],1)],2)])])},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bCoupons__header row"},[n("div",{staticClass:"bCoupons__header__h2 h2 col"},[t._v("優惠券管理")])])}],o=(n("7db0"),n("4160"),n("159b"),{data:function(){return{coupons:[],newCoupon2:{id:"",description:"",availableLogic:function(t){return t},discount:0,discountLogic:function(t){return t}},newCoupon:{id:"",description:"",discount_method:"",discount_index:0,discount:0}}},methods:{initialize_coupons:function(){var t;this.$bus.$on("son_get_data",(function(e){t=e.coupons})),this.$bus.$emit("son_call_data"),t.forEach((function(e,n){t[n].editing=!1})),this.coupons=JSON.parse(JSON.stringify(t))},create_new_coupon:function(){this.newCoupon={id:"",description:"",discount_method:"",discount_index:0,discount:0}},convert_discount_method:function(t){var e="";switch(t){case"minus":e="原價減去";break;case"times":e="原價打折";break;default:break}return e},start_editing:function(t){var e=this.coupons.find((function(t){return!0===t.editing}));void 0===e?this.coupons[t].editing=!0:this.$bus.$emit("show_toast","warning","一次只能進行一個優惠券編輯")},complete_editing:function(t){var e=JSON.parse(JSON.stringify(this.coupons[t]));delete e.editing,this.$bus.$emit("edit_coupon",e,t),this.initialize_coupons()},delete_coupon:function(t){this.$bus.$emit("delete_coupon",t),this.initialize_coupons()},submit_new_coupon:function(){var t=JSON.parse(JSON.stringify(this.newCoupon));this.$bus.$emit("add_new_coupon",t),this.create_new_coupon(),this.initialize_coupons()}},created:function(){this.initialize_coupons()}}),a=o,d=n("2877"),r=Object(d["a"])(a,i,s,!1,null,null,null);e["default"]=r.exports}}]);
//# sourceMappingURL=chunk-2d226782.fef79699.js.map