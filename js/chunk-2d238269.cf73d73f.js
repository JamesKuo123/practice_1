(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d238269"],{fdc8:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bAdmins"},[n("div",{staticClass:"bAdmins__container container pt-4"},[t._m(0),n("div",{staticClass:"bAdmins__body row"},[t._l(t.admins,(function(e,i){return n("form",{key:i,staticClass:"col-12 col-md-6 col-lg-4 mb-3"},[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"admin"+i,expression:"`admin${index}`"}],staticClass:"mb-1 w-100 d-flex flex-column align-items-center"},[n("span",[t._v(t._s(e.name))])]),n("b-collapse",{attrs:{id:"admin"+i}},[n("b-card",{staticClass:"p-0"},[n("ul",{staticClass:"list-group"},[n("li",{staticClass:"list-group-item\n                border-top-0 border-left-0 border-right-0\n                d-flex justify-content-between align-items-center"},[n("span",{staticClass:"pr-2"},[t._v("管理員ID")]),n("span",[t._v(" "+t._s(e.id)+" ")])]),n("li",{staticClass:"list-group-item\n                border-top-0 border-left-0 border-right-0\n                d-flex justify-content-between align-items-center"},[n("span",{staticClass:"pr-2"},[t._v("管理員姓名")]),e.editing?t._e():n("span",[t._v(" "+t._s(e.name)+" ")]),e.editing?n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"item.name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.name},on:{input:function(n){n.target.composing||t.$set(e,"name",n.target.value)}}}):t._e()]),n("li",{staticClass:"list-group-item\n                border-top-0 border-left-0 border-right-0\n                d-flex justify-content-between align-items-center"},[n("span",{staticClass:"pr-2"},[t._v("管理員權限")]),n("span",[t._v(" "+t._s(e.level)+" ")])]),n("li",{staticClass:"list-group-item border-0\n                d-flex justify-content-end align-items-center"},[t.admin.id!==e.id||e.editing?t._e():n("button",{staticClass:"btn btn-sm btn-info",on:{click:function(e){return e.preventDefault(),t.start_editing_admin(i)}}},[t._v(" 編輯資料 ")]),t.admin.id===e.id&&e.editing?n("button",{staticClass:"btn btn-sm btn-success mr-2",on:{click:function(e){return e.preventDefault(),t.submit_editing_admin(i)}}},[t._v(" 儲存變更 ")]):t._e(),t.admin.id===e.id&&e.editing?n("button",{staticClass:"btn btn-sm btn-secondary",on:{click:function(e){return e.preventDefault(),t.initialize_admins(e)}}},[t._v(" 放棄編輯 ")]):t._e(),t.admin.level<e.level?n("button",{staticClass:"btn btn-sm btn-danger",on:{click:function(e){return e.preventDefault(),t.confirm_delete_admin(i)}}},[t._v(" 刪除管理員 ")]):t._e()])])])],1)],1)})),n("form",{staticClass:"col-12 col-md-6 col-lg-4 mb-3",on:{submit:function(e){return e.preventDefault(),t.add_admin(e)}}},[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"newAdmin",expression:"'newAdmin'"}],staticClass:"mb-1 w-100 d-flex flex-column align-items-center",attrs:{variant:"primary"}},[n("span",[t._v("新增管理員")])]),n("b-collapse",{attrs:{id:"newAdmin"}},[n("b-card",{staticClass:"p-0"},[n("ul",{staticClass:"list-group"},[n("li",{staticClass:"list-group-item\n                border-top-0 border-left-0 border-right-0\n                d-flex justify-content-between align-items-center"},[n("span",{staticClass:"pr-2"},[t._v("管理員ID")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.newAdmin.id,expression:"newAdmin.id"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.newAdmin.id},on:{input:function(e){e.target.composing||t.$set(t.newAdmin,"id",e.target.value)}}})]),n("li",{staticClass:"list-group-item\n                border-top-0 border-left-0 border-right-0\n                d-flex justify-content-between align-items-center"},[n("span",{staticClass:"pr-2"},[t._v("管理員姓名")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.newAdmin.name,expression:"newAdmin.name"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.newAdmin.name},on:{input:function(e){e.target.composing||t.$set(t.newAdmin,"name",e.target.value)}}})]),n("li",{staticClass:"list-group-item\n                border-top-0 border-left-0 border-right-0\n                d-flex justify-content-between align-items-center"},[n("span",{staticClass:"pr-2"},[t._v("管理員權限")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.newAdmin.level,expression:"newAdmin.level"}],staticClass:"form-control",attrs:{type:"number",required:"",min:t.admin.level+1,step:"1"},domProps:{value:t.newAdmin.level},on:{input:function(e){e.target.composing||t.$set(t.newAdmin,"level",e.target.value)}}})]),n("li",{staticClass:"list-group-item border-0\n                d-flex justify-content-end align-items-center"},[n("button",{staticClass:"btn btn-sm btn-success mr-2",attrs:{type:"submit"}},[t._v(" 新增管理員 ")]),n("button",{staticClass:"btn btn-sm btn-secondary",on:{click:function(e){return e.preventDefault(),t.refresh_newAdmin(e)}}},[t._v(" 清除重填 ")])])])])],1)],1)],2)]),n("b-modal",{attrs:{id:"confirm_delete_admin",title:"確認","ok-title":"是","cancel-title":"否"},on:{ok:function(e){return t.delete_admin(t.deletingAdmin.id)}}},[n("p",{staticClass:"my-3"},[t._v("確定要刪除嗎?")])])],1)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bAdmins__header row"},[n("div",{staticClass:"bAdmins__header__h2 h2 col"},[t._v("管理員管理")])])}],a=(n("7db0"),n("4160"),n("159b"),{props:["admin"],data:function(){return{admins:[],newAdmin:{},deletingAdmin:{}}},methods:{initialize_admins:function(){var t=this;this.$bus.$on("son_get_data",(function(e){t.admins=JSON.parse(JSON.stringify(e.administrators))})),this.$bus.$emit("son_call_data"),this.admins.forEach((function(e){t.$set(e,"editing",!1)}))},refresh_newAdmin:function(){var t=this.admin.level;this.newAdmin={id:"",name:"",account:"",password:"",level:t+1}},add_admin:function(){var t=this,e=function(){var e,n=t.newAdmin.id,i=t.admins.find((function(t){return t.id===n}));return e=void 0===i,e};if(e()){var n=JSON.parse(JSON.stringify(this.newAdmin));this.$bus.$emit("add_new_admin",n),this.initialize_admins(),this.refresh_newAdmin()}else this.$bus.$emit("show_toast","warning","此 ID 已被使用")},confirm_delete_admin:function(t){var e=this.admins[t];this.deletingAdmin=e,this.$bvModal.show("confirm_delete_admin")},delete_admin:function(t){this.$bus.$emit("delete_admin",t),this.initialize_admins(),this.deletingAdmin={}},start_editing_admin:function(t){this.admins[t].editing=!0},submit_editing_admin:function(t){var e=JSON.parse(JSON.stringify(this.admins[t]));delete e.editing,this.$bus.$emit("edit_admin",t,e),this.initialize_admins()}},created:function(){this.initialize_admins(),this.refresh_newAdmin()}}),r=a,d=n("2877"),l=Object(d["a"])(r,i,s,!1,null,null,null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d238269.cf73d73f.js.map