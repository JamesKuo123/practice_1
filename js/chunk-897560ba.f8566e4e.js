(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-897560ba"],{"0cec":function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bNews"},[n("div",{staticClass:"bNews__container container pt-4"},[e._m(0),n("div",{staticClass:"bNews__body d-flex flex-column align-items-center"},[n("form",{staticClass:"w-100 pb-3",on:{submit:function(t){return t.preventDefault(),e.add_new_news(t)}}},[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"newNews",expression:"'newNews'"}],staticClass:"btn-info m-1 w-100 d-flex flex-column align-items-center"},[e._v(" 新增新聞 ")]),n("b-collapse",{attrs:{id:"newNews"}},[n("b-card",{staticClass:"p-1"},[n("div",{staticClass:"form-group d-flex justify-content-end"},[n("button",{staticClass:"btn btn-info mr-3",attrs:{type:"submit"}},[e._v(" 新增新聞 ")]),n("button",{staticClass:"btn btn-danger",on:{click:function(t){return t.preventDefault(),e.create_new_news(t)}}},[e._v(" 清除重填 ")])]),n("div",{staticClass:"form-group"},[n("label",[e._v("新聞標題")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newNews.title,expression:"newNews.title"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:e.newNews.title},on:{input:function(t){t.target.composing||e.$set(e.newNews,"title",t.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",[e._v("新聞描述")]),n("ckeditor",{attrs:{editor:e.ckEditorType},model:{value:e.newNews.description,callback:function(t){e.$set(e.newNews,"description",t)},expression:"newNews.description"}})],1),n("div",{staticClass:"form-group"},[n("label",[e._v("新聞內容")]),n("ckeditor",{attrs:{editor:e.ckEditorType},model:{value:e.newNews.content,callback:function(t){e.$set(e.newNews,"content",t)},expression:"newNews.content"}})],1),n("div",{staticClass:"form-group"},[n("label",[e._v("新聞備註")]),n("ckeditor",{attrs:{editor:e.ckEditorType},model:{value:e.newNews.remark,callback:function(t){e.$set(e.newNews,"remark",t)},expression:"newNews.remark"}})],1)])],1)],1),e._l(e.news,(function(t,s){return n("form",{key:s,staticClass:"w-100 pb-3",on:{submit:function(n){return n.preventDefault(),e.edit_news(t)}}},[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:t.id,expression:"item.id"}],staticClass:"m-1 w-100 d-flex flex-column align-items-center"},[n("span",{staticClass:"pb-2"},[e._v(e._s(t.date))]),n("span",[e._v(e._s(t.title))])]),n("b-collapse",{attrs:{id:t.id}},[n("b-card",{staticClass:"p-1"},[n("div",{staticClass:"form-group d-flex justify-content-end"},[n("button",{staticClass:"btn btn-info mr-3",attrs:{type:"submit"}},[e._v(" 儲存變更 ")]),n("button",{staticClass:"btn btn-danger",on:{click:function(n){return n.preventDefault(),e.delete_news(t.id)}}},[e._v(" 刪除新聞 ")])]),n("div",{staticClass:"form-group"},[n("label",[e._v("新聞標題")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"item.title"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.title},on:{input:function(n){n.target.composing||e.$set(t,"title",n.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",[e._v("新聞描述")]),n("ckeditor",{attrs:{editor:e.ckEditorType},model:{value:t.description,callback:function(n){e.$set(t,"description",n)},expression:"item.description"}})],1),n("div",{staticClass:"form-group"},[n("label",[e._v("新聞內容")]),n("ckeditor",{attrs:{editor:e.ckEditorType},model:{value:t.content,callback:function(n){e.$set(t,"content",n)},expression:"item.content"}})],1),n("div",{staticClass:"form-group"},[n("label",[e._v("新聞備註")]),n("ckeditor",{attrs:{editor:e.ckEditorType},model:{value:t.remark,callback:function(n){e.$set(t,"remark",n)},expression:"item.remark"}})],1)])],1)],1)}))],2)])])},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bNews__header row"},[n("div",{staticClass:"bNews__header__h2 h2 col"},[e._v("最新消息")])])}],a=(n("99af"),n("4de4"),n("caad"),n("fb6a"),n("2532"),n("fb3d")),r=n.n(a),o={data:function(){return{news:[],newNews:{id:"",title:"",date:"",description:"",banner:"",content:"",remark:""},ckEditorType:r.a}},methods:{initialize_news:function(){var e;this.$bus.$on("son_get_data",(function(t){e=JSON.parse(JSON.stringify(t.news))})),this.$bus.$emit("son_call_data"),e.sort((function(e,t){var n=JSON.parse(e.id.slice(-8)),s=JSON.parse(t.id.slice(-8));return s-n})),this.news=e},create_new_news:function(){var e=this;this.newNews={id:"",title:"",date:"",description:"",banner:"",content:"",remark:""};var t=new Date,n=function(e){var t=e.getFullYear(),n=e.getMonth()+1,s=e.getDate();return"".concat(t,"-").concat((n>9?"":"0")+n,"-").concat((s>9?"":"0")+s)},s=function(e){var t=e.getFullYear(),n=e.getMonth()+1,s=e.getDate();return"NEW".concat(t).concat((n>9?"":"0")+n).concat((s>9?"":"0")+s)},i=function(t){var n=e.news.filter((function(e){return e.id.includes(t)})),s=n.length,i=(s+1>9?"":"0")+(s+1);return i};this.newNews.id="".concat(s(t)).concat(i(s(t))),this.newNews.date=n(t)},add_new_news:function(){this.$bus.$emit("add_new_news",this.newNews),this.initialize_news(),this.create_new_news()},edit_news:function(e){this.$bus.$emit("edit_news",e),this.initialize_news()},delete_news:function(e){this.$bus.$emit("delete_news",e),this.initialize_news()}},created:function(){this.initialize_news(),this.create_new_news()}},c=o,l=(n("da02"),n("2877")),d=Object(l["a"])(c,s,i,!1,null,null,null);t["default"]=d.exports},"660f":function(e,t,n){},da02:function(e,t,n){"use strict";n("660f")}}]);
//# sourceMappingURL=chunk-897560ba.f8566e4e.js.map