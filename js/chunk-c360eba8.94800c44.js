(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c360eba8"],{"0481":function(t,e,r){"use strict";var n=r("23e7"),i=r("a2bf"),o=r("7b0b"),s=r("50c4"),c=r("a691"),a=r("65f0");n({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,e=o(this),r=s(e.length),n=a(e,0);return n.length=i(n,e,e,r,0,void 0===t?1:c(t)),n}})},2909:function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var n=r("6b75");function i(t){if(Array.isArray(t))return Object(n["a"])(t)}r("a4d3"),r("e01a"),r("d28b"),r("a630"),r("d3b7"),r("3ca3"),r("ddb0");function o(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var s=r("06c5");function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(t){return i(t)||o(t)||Object(s["a"])(t)||c()}},4069:function(t,e,r){var n=r("44d2");n("flat")},6062:function(t,e,r){"use strict";var n=r("6d61"),i=r("6566");t.exports=n("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i)},6566:function(t,e,r){"use strict";var n=r("9bf2").f,i=r("7c73"),o=r("e2cc"),s=r("0366"),c=r("19aa"),a=r("2266"),u=r("7dd0"),d=r("2626"),l=r("83ab"),m=r("f183").fastKey,f=r("69f3"),v=f.set,p=f.getterFor;t.exports={getConstructor:function(t,e,r,u){var d=t((function(t,n){c(t,d,e),v(t,{type:e,index:i(null),first:void 0,last:void 0,size:0}),l||(t.size=0),void 0!=n&&a(n,t[u],{that:t,AS_ENTRIES:r})})),f=p(e),g=function(t,e,r){var n,i,o=f(t),s=_(t,e);return s?s.value=r:(o.last=s={index:i=m(e,!0),key:e,value:r,previous:n=o.last,next:void 0,removed:!1},o.first||(o.first=s),n&&(n.next=s),l?o.size++:t.size++,"F"!==i&&(o.index[i]=s)),t},_=function(t,e){var r,n=f(t),i=m(e);if("F"!==i)return n.index[i];for(r=n.first;r;r=r.next)if(r.key==e)return r};return o(d.prototype,{clear:function(){var t=this,e=f(t),r=e.index,n=e.first;while(n)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete r[n.index],n=n.next;e.first=e.last=void 0,l?e.size=0:t.size=0},delete:function(t){var e=this,r=f(e),n=_(e,t);if(n){var i=n.next,o=n.previous;delete r.index[n.index],n.removed=!0,o&&(o.next=i),i&&(i.previous=o),r.first==n&&(r.first=i),r.last==n&&(r.last=o),l?r.size--:e.size--}return!!n},forEach:function(t){var e,r=f(this),n=s(t,arguments.length>1?arguments[1]:void 0,3);while(e=e?e.next:r.first){n(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!_(this,t)}}),o(d.prototype,r?{get:function(t){var e=_(this,t);return e&&e.value},set:function(t,e){return g(this,0===t?0:t,e)}}:{add:function(t){return g(this,t=0===t?0:t,t)}}),l&&n(d.prototype,"size",{get:function(){return f(this).size}}),d},setStrong:function(t,e,r){var n=e+" Iterator",i=p(e),o=p(n);u(t,e,(function(t,e){v(this,{type:n,target:t,state:i(t),kind:e,last:void 0})}),(function(){var t=o(this),e=t.kind,r=t.last;while(r&&r.removed)r=r.previous;return t.target&&(t.last=r=r?r.next:t.state.first)?"keys"==e?{value:r.key,done:!1}:"values"==e?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),d(e)}}},"6d61":function(t,e,r){"use strict";var n=r("23e7"),i=r("da84"),o=r("94ca"),s=r("6eeb"),c=r("f183"),a=r("2266"),u=r("19aa"),d=r("861d"),l=r("d039"),m=r("1c7e"),f=r("d44e"),v=r("7156");t.exports=function(t,e,r){var p=-1!==t.indexOf("Map"),g=-1!==t.indexOf("Weak"),_=p?"set":"add",b=i[t],h=b&&b.prototype,w=b,P={},y=function(t){var e=h[t];s(h,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(g&&!d(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!d(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!d(t))&&e.call(this,0===t?0:t)}:function(t,r){return e.call(this,0===t?0:t,r),this})};if(o(t,"function"!=typeof b||!(g||h.forEach&&!l((function(){(new b).entries().next()})))))w=r.getConstructor(e,t,p,_),c.REQUIRED=!0;else if(o(t,!0)){var C=new w,x=C[_](g?{}:-0,1)!=C,k=l((function(){C.has(1)})),S=m((function(t){new b(t)})),D=!g&&l((function(){var t=new b,e=5;while(e--)t[_](e,e);return!t.has(-0)}));S||(w=e((function(e,r){u(e,w,t);var n=v(new b,e,w);return void 0!=r&&a(r,n[_],{that:n,AS_ENTRIES:p}),n})),w.prototype=h,h.constructor=w),(k||D)&&(y("delete"),y("has"),p&&y("get")),(D||x)&&y(_),g&&h.clear&&delete h.clear}return P[t]=w,n({global:!0,forced:w!=b},P),f(w,t),g||r.setStrong(w,t,p),w}},a2bf:function(t,e,r){"use strict";var n=r("e8b5"),i=r("50c4"),o=r("0366"),s=function(t,e,r,c,a,u,d,l){var m,f=a,v=0,p=!!d&&o(d,l,3);while(v<c){if(v in r){if(m=p?p(r[v],v,e):r[v],u>0&&n(m))f=s(t,e,m,i(m.length),f,u-1)-1;else{if(f>=9007199254740991)throw TypeError("Exceed the acceptable array length");t[f]=m}f++}v++}return f};t.exports=s},fd39:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"bProducts"},[r("div",{staticClass:"bProducts__container container"},[r("div",{staticClass:"bProducts__row row"},[r("transition",{attrs:{name:"fade"}},[t.productListShown?r("div",{staticClass:"bProductList col-12 col-md-4 col-lg-2"},[r("div",{staticClass:"bProductList__container"},[r("ul",{staticClass:"bProductList__list row"},[r("li",{staticClass:"bProductList__item col-12"},[r("a",{staticClass:"bProductList__a",attrs:{href:"#"},on:{click:t.start_creating_newProduct}},[r("div",{staticClass:"bProductList__main"},[t._v(" 新增產品 ")])])]),t._l(t.products,(function(e,n){return r("li",{key:n,staticClass:"bProductList__item col-12"},[r("a",{staticClass:"bProductList__a",attrs:{href:"#"},on:{click:function(r){return t.start_editing(e.id)}}},[r("div",{staticClass:"bProductList__img"},[r("img",{attrs:{src:e.images.main,alt:""}})]),r("div",{staticClass:"bProductList__main"},[r("span",{staticClass:"bProductList__title"},[t._v(" "+t._s(e.title)+" ")]),r("span",{staticClass:"bProductList__id"},[t._v(" "+t._s(e.id)+" ")])])])])}))],2)])]):t._e()]),r("div",{staticClass:"bProductListFolder d-md-none"},[r("button",{staticClass:"bProductListFolder__btn btn btn-secondary",on:{click:function(e){e.preventDefault(),t.toggle_productList(!t.productListShown),t.toggle_productDetail(!t.productDetailShown)}}},[t.productListShown?t._e():r("span",[t._v(" 產品選單 ")]),t.productDetailShown?t._e():r("span",[t._v(" 產品細節 ")])])]),r("transition",{attrs:{name:"fade"}},[r("form",{staticClass:"col-12 col-md-8 col-lg-10",on:{submit:function(e){return e.preventDefault(),t.submit_form(t.currentProduct)}}},[t.productDetailShown?r("div",{staticClass:"bProductDetail"},[r("div",{staticClass:"bProductDetail__container"},[r("div",{staticClass:"bProductDetail__header"},[r("div",{staticClass:"bProductDetail__row row"},[r("p",{staticClass:"bProductDetail__title col"},[t._v(" 產品詳細資料 ")]),r("div",{staticClass:"bProductDetail__funcBtns"},[t.creatingNewProduct?t._e():r("button",{staticClass:"btn btn-success mr-1",attrs:{type:"submit"}},[t._v(" 儲存變更 ")]),t.creatingNewProduct?t._e():r("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.delete_product(t.currentProduct)}}},[t._v(" 刪除產品 ")]),t.creatingNewProduct?r("button",{staticClass:"btn btn-info",attrs:{type:"submit"}},[t._v(" 新增產品 ")]):t._e()])])]),r("div",{staticClass:"bProductDetail__body"},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"product_id"}},[t._v("產品ID")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.currentProduct.id,expression:"currentProduct.id"}],staticClass:"form-control",attrs:{type:"text",required:"",id:"product_id"},domProps:{value:t.currentProduct.id},on:{input:function(e){e.target.composing||t.$set(t.currentProduct,"id",e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"product_title"}},[t._v("產品名稱")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.currentProduct.title,expression:"currentProduct.title"}],staticClass:"form-control",attrs:{type:"text",required:"",id:"product_title"},domProps:{value:t.currentProduct.title},on:{input:function(e){e.target.composing||t.$set(t.currentProduct,"title",e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"product_price"}},[t._v("價格")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.currentProduct.price,expression:"currentProduct.price"}],staticClass:"form-control",attrs:{type:"number",min:"1",required:"",id:"product_price"},domProps:{value:t.currentProduct.price},on:{input:function(e){e.target.composing||t.$set(t.currentProduct,"price",e.target.value)}}})]),r("div",{staticClass:"form-group form-check"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.currentProduct.is_new,expression:"currentProduct.is_new"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"product_is_new"},domProps:{checked:Array.isArray(t.currentProduct.is_new)?t._i(t.currentProduct.is_new,null)>-1:t.currentProduct.is_new},on:{change:function(e){var r=t.currentProduct.is_new,n=e.target,i=!!n.checked;if(Array.isArray(r)){var o=null,s=t._i(r,o);n.checked?s<0&&t.$set(t.currentProduct,"is_new",r.concat([o])):s>-1&&t.$set(t.currentProduct,"is_new",r.slice(0,s).concat(r.slice(s+1)))}else t.$set(t.currentProduct,"is_new",i)}}}),r("label",{staticClass:"form-check-label",attrs:{for:"product_is_new"}},[t._v("使否標示為新產品")])]),r("div",{staticClass:"form-group form-check"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.currentProduct.on_banner,expression:"currentProduct.on_banner"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"product_on_banner"},domProps:{checked:Array.isArray(t.currentProduct.on_banner)?t._i(t.currentProduct.on_banner,null)>-1:t.currentProduct.on_banner},on:{change:function(e){var r=t.currentProduct.on_banner,n=e.target,i=!!n.checked;if(Array.isArray(r)){var o=null,s=t._i(r,o);n.checked?s<0&&t.$set(t.currentProduct,"on_banner",r.concat([o])):s>-1&&t.$set(t.currentProduct,"on_banner",r.slice(0,s).concat(r.slice(s+1)))}else t.$set(t.currentProduct,"on_banner",i)}}}),r("label",{staticClass:"form-check-label",attrs:{for:"product_on_banner"}},[t._v("使否在首頁輪播")])]),r("hr"),r("div",{staticClass:"form-row"},[t._l(t.currentProduct.category,(function(e,n){return r("div",{key:n,staticClass:"form-group col-4 col-md-3"},[r("label",[r("span",{staticClass:"pr-1"},[t._v("產品分類--"+t._s(n+1))]),r("button",{staticClass:"btn btn-sm btn-secondary",on:{click:function(e){return e.preventDefault(),t.delete_category(n)}}},[t._v(" 刪除 ")])]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.chinese,expression:"item.chinese"}],staticClass:"form-control",attrs:{type:"text",placeholder:"描述標題"},domProps:{value:e.chinese},on:{input:function(r){r.target.composing||t.$set(e,"chinese",r.target.value)}}}),r("input",{directives:[{name:"model",rawName:"v-model",value:e.english,expression:"item.english"}],staticClass:"form-control",attrs:{type:"text",placeholder:"描述內容"},domProps:{value:e.english},on:{input:function(r){r.target.composing||t.$set(e,"english",r.target.value)}}})])})),r("button",{staticClass:"btn btn-success col-4 col-md-3 mt-3 mb-3",on:{click:function(e){return e.preventDefault(),t.add_new_category(e)}}},[t._v(" 新增產品分類 ")])],2),r("div",{staticClass:"form-row"},t._l(t.categoryMenu,(function(e,n){return r("div",{key:n,staticClass:"p-1 col-4 col-md-3"},[r("button",{staticClass:"btn btn-secondary\n                    col d-flex flex-column align-items-center",on:{click:function(r){return r.preventDefault(),t.add_new_category(e)}}},[r("span",[t._v(t._s(e.chinese))]),r("span",[t._v(t._s(e.english))])])])})),0),r("hr"),r("div",{staticClass:"form-row"},[r("div",{staticClass:"col-4 col-md-3 mb-2"},[""===t.currentProduct.images.main?r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"mainImg"}},[t._v("新增主要圖片")]),r("input",{staticClass:"form-control-file",attrs:{type:"file",id:"mainImg",accept:"image/gif, image/jpeg, image/png"},on:{change:function(e){return t.previewImg(e.target)}}}),r("img",{staticClass:"obj-cover image w-100 h-100 rounded mt-2",attrs:{src:"",alt:"",id:"mainImgPreview"}})]):t._e(),""!==t.currentProduct.images.main?r("div",[r("button",{staticClass:"btn btn-secondary btn-sm mb-1",on:{click:function(e){return e.preventDefault(),t.delete_img("main")}}},[t._v(" 刪除主要圖片 ")]),r("img",{staticClass:"obj-cover image w-100 h-100 rounded",attrs:{src:t.currentProduct.images.main},on:{click:function(e){t.lightBoxindex=0}}})]):t._e()]),r("div",{staticClass:"col-4 col-md-3 mb-2"},[""===t.currentProduct.images.banner?r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"bannerImg"}},[t._v("新增首頁圖片")]),r("input",{staticClass:"form-control-file",attrs:{type:"file",id:"bannerImg",accept:"image/gif, image/jpeg, image/png"},on:{change:function(e){return t.previewImg(e.target)}}}),r("img",{staticClass:"obj-cover image w-100 h-100 rounded mt-2",attrs:{src:"",alt:"",id:"bannerImgPreview"}})]):t._e(),""!==t.currentProduct.images.banner?r("div",[r("button",{staticClass:"btn btn-secondary btn-sm mb-1",on:{click:function(e){return e.preventDefault(),t.delete_img("banner")}}},[t._v(" 刪除首頁圖片 ")]),r("img",{staticClass:"obj-cover image w-100 h-100 rounded",attrs:{src:t.currentProduct.images.banner},on:{click:function(e){t.lightBoxindex=1}}})]):t._e()]),t._l(t.currentProduct.images.others,(function(e,n){return r("div",{key:n,staticClass:"col-4 col-md-3 mb-2"},[""===e?r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"img"+n}},[t._v("其他圖片 "+t._s(n+1))]),r("input",{staticClass:"form-control-file",attrs:{type:"file",id:"img"+n,accept:"image/gif, image/jpeg, image/png"},on:{change:function(e){return t.previewImg(e.target)}}}),r("img",{staticClass:"obj-cover image w-100 h-100 rounded mt-2",attrs:{src:"",alt:"",id:"img"+n+"Preview"}})]):t._e(),""!==e?r("div",[r("button",{staticClass:"btn btn-secondary btn-sm mb-1",on:{click:function(e){return e.preventDefault(),t.delete_img(n)}}},[t._v(" 刪除 ")]),r("img",{staticClass:"obj-cover image w-100 h-100 rounded",attrs:{src:e},on:{click:function(e){t.lightBoxindex=n}}})]):t._e()])})),r("button",{staticClass:"btn btn-success col-4 col-md-3 mt-3 mb-3",on:{click:function(e){return e.preventDefault(),t.add_new_image(e)}}},[t._v(" 新增其他圖片 ")]),r("vue-gallery-slideshow",{attrs:{images:t.images,index:t.lightBoxindex},on:{close:function(e){t.lightBoxindex=null}}})],2),r("hr"),r("div",{staticClass:"form-row"},[t._l(t.currentProduct.description,(function(e,n){return r("div",{key:n,staticClass:"form-group col-4 col-md-3"},[r("label",[r("span",{staticClass:"pr-1"},[t._v("產品描述--"+t._s(n+1))]),r("button",{staticClass:"btn btn-sm btn-secondary",on:{click:function(e){return e.preventDefault(),t.delete_description(n)}}},[t._v(" 刪除 ")])]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"item.title"}],staticClass:"form-control",attrs:{type:"text",placeholder:"描述標題"},domProps:{value:e.title},on:{input:function(r){r.target.composing||t.$set(e,"title",r.target.value)}}}),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"item.text"}],staticClass:"form-control",attrs:{rows:"3"},domProps:{value:e.text},on:{input:function(r){r.target.composing||t.$set(e,"text",r.target.value)}}})])})),r("button",{staticClass:"btn btn-success col-4 col-md-3 mt-3 mb-3",on:{click:function(e){return e.preventDefault(),t.add_new_description(e)}}},[t._v(" 新增產品描述 ")])],2),r("hr"),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"product_content"}},[t._v("產品內容")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.currentProduct.content,expression:"currentProduct.content"}],staticClass:"form-control",attrs:{id:"product_content",rows:"10"},domProps:{value:t.currentProduct.content},on:{input:function(e){e.target.composing||t.$set(t.currentProduct,"content",e.target.value)}}})])])])]):t._e()])])],1)])])},i=[],o=(r("a4d3"),r("e01a"),r("4de4"),r("7db0"),r("0481"),r("d81d"),r("a434"),r("4069"),r("d3b7"),r("07ac"),r("6062"),r("3ca3"),r("ddb0"),r("2909")),s=r("1157"),c=r.n(s),a=r("b417"),u=r.n(a),d={components:{VueGallerySlideshow:u.a},computed:{products:function(){var t=[];return this.$bus.$on("son_get_data",(function(e){t=e.products})),this.$bus.$emit("son_call_data"),t},categories:function(){var t=[],e=this.products.map((function(t){return t.category})).flat(1).map((function(t){return JSON.stringify(t)})),r=Object(o["a"])(new Set(e)).map((function(t){return JSON.parse(t)}));return t=r,t},images:function(){var t=[],e=this.currentProduct.images,r=Object.values(e).flat(2);return t=r,t}},data:function(){return{productListShown:!0,productDetailShown:!1,creatingNewProduct:!0,currentProduct:{title:"",id:"",price:1,is_new:!1,on_banner:!1,category:[],images:{main:"",banner:"",others:[]},content:"",description:[]},categoryMenu:[],lightBoxindex:null}},methods:{go_page:function(t){this.$router.push(t)},toggle_productList:function(t){this.productListShown=t},toggle_productDetail:function(t){this.productDetailShown=t},submit_form:function(t){var e=this,r=function(){var t=!1;return""===e.currentProduct.images.main?e.$bus.$emit("show_toast","warning","不可以沒有主要圖片"):""===e.currentProduct.images.banner?e.$bus.$emit("show_toast","warning","不可以沒有首頁圖片"):t=!0,t};r()&&(this.creatingNewProduct?this.$bus.$emit("add_new_product",t):this.$bus.$emit("edit_product",t))},delete_product:function(t){var e=window.confirm("確定要刪除嗎?");e&&(this.$bus.$emit("delete_product",t),this.start_creating_newProduct())},add_new_description:function(){var t={title:"",text:""};this.currentProduct.description.push(t)},delete_description:function(t){this.currentProduct.description.splice(t,1)},reset_categoryMenu:function(){var t=this;this.categoryMenu=this.categories.filter((function(e){return void 0===t.currentProduct.category.find((function(t){return JSON.stringify(t)===JSON.stringify(e)}))}))},add_new_category:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{chinese:"",english:""};this.currentProduct.category.push(t),this.reset_categoryMenu()},delete_category:function(t){this.currentProduct.category.splice(t,1),this.reset_categoryMenu()},add_new_image:function(){var t="";this.currentProduct.images.others.push(t)},delete_img:function(t){switch(t){case"main":this.currentProduct.images.main="";break;case"banner":this.currentProduct.images.banner="";break;default:this.currentProduct.images.others[t]="";break}},start_creating_newProduct:function(){this.currentProduct={title:"",id:"",price:1,is_new:!1,on_banner:!1,category:[],images:{main:"",banner:"",others:[]},content:"",description:[]},this.creatingNewProduct=!0,this.rwdSet(),this.reset_categoryMenu()},start_editing:function(t){var e=this.products.find((function(e){return e.id===t}));this.currentProduct=JSON.parse(JSON.stringify(e)),this.creatingNewProduct=!1,this.rwdSet(),this.reset_categoryMenu()},rwdSet:function(){var t=c()(window).width();t>=768?(this.toggle_productList(!0),this.toggle_productDetail(!0)):(this.toggle_productList(!1),this.toggle_productDetail(!0))},previewImg:function(t){var e=t.id,r=document.getElementById("".concat(e,"Preview"));if(t.files&&t.files[0]){var n=new FileReader;n.readAsDataURL(t.files[0]),n.onload=function(t){r.setAttribute("src",t.target.result)}}else r.setAttribute("src","")}},created:function(){this.start_creating_newProduct()},mounted:function(){var t=this;this.rwdSet(),c()(window).resize((function(){t.rwdSet()}))}},l=d,m=r("2877"),f=Object(m["a"])(l,n,i,!1,null,null,null);e["default"]=f.exports}}]);
//# sourceMappingURL=chunk-c360eba8.94800c44.js.map